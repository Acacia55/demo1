<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.example.demo1.dao.QuestionnaireEntityMapper">

  <insert id="insert" parameterType="com.example.demo1.dao.entity.QuestionnaireEntity">
    <!--
      WARNING - @mbg.generated
      This element is automatically generated by MyBatis Generator, do not modify.
    -->
    insert into questionnaire (id, projectName, answerType,
    questionnaireName, content, startTime, endTime)
    values (#{id,jdbcType=VARCHAR}, #{projectName,jdbcType=VARCHAR}, #{answertype,jdbcType=VARCHAR},
    #{questionnaireName,jdbcType=LONGVARCHAR}, #{content,jdbcType=LONGVARCHAR},
    #{startTime,jdbcType=TIMESTAMP}, #{endTime,jdbcType=TIMESTAMP})
  </insert>

  <select id="queryQuestionnaireList" resultType="java.util.Map">
    SELECT
        qn.questionnaireName,
        an.username,
        an.answertime,
        qn.id
    FROM
        project_info pj,
        questionnaire qn,
        answer an,
        options op,
        question qs
    WHERE
        pj.id=#{id,jdbcType=VARCHAR}
    AND pj.project_name=qn.projectName
    AND qs.questionnaireId=qn.id
    AND op.questionid=qs.questionId
    AND an.optionid=op.id
    GROUP BY an.answertime;
  </select>

    <select id="seeQuestionnaire" resultType="com.example.demo1.dao.entity.QuestionsAndOptionsEntity">
        SELECT
            qn.questionnaireName,
            qn.content,
            an.username,
            qs.questionTypeName,
            op.optionContent,
            an.optionid
        From
            questionnaire qn,
            question qs,
            options op,
            answer an
        WHERE
            qn.id=#{id,jdbcType=VARCHAR}
        AND qs.questionnaireId=qn.id
        AND op.questionid=qs.questionId
        AND an.optionid=op.id
    </select>

    <select id="queryQuestionnaireById" resultType="com.example.demo1.dao.entity.QuestionnaireEntity">
        SELECT
            *
        FROM
            questionnaire
        WHERE
            id=#{id,jdbcType=VARCHAR}
    </select>

    <select id="queryQuestionnaireByProjectName" resultType="com.example.demo1.dao.entity.QuestionnaireEntity" >
        SELECT
            *
        FROM
            questionnaire
        WHERE
            projectName=#{projectName,jdbcType=VARCHAR}
    </select>
</mapper>